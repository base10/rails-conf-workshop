  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 14:18:03 UTC], ["updated_at", 2017-03-17 14:18:03 UTC]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 14:27:44 UTC], ["updated_at", 2017-03-17 14:27:44 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 14:28:56 UTC], ["updated_at", 2017-03-17 14:28:56 UTC]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 14:29:11 UTC], ["updated_at", 2017-03-17 14:29:11 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 14:29:23 UTC], ["updated_at", 2017-03-17 14:29:23 UTC]]
  [1m[35m (47.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.4ms)[0m  [1m[31mDELETE FROM "user_profiles";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'user_profiles';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "users";[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'users';[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "ar_internal_metadata";[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  [1m[31mDELETE FROM sqlite_sequence where name = 'ar_internal_metadata';[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUserProfile Load (0.1ms)[0m  [1m[34mSELECT  "user_profiles".* FROM "user_profiles" WHERE "user_profiles"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 16:11:38 UTC], ["updated_at", 2017-03-17 16:11:38 UTC]]
  [1m[35m (31.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 16:11:47 UTC], ["updated_at", 2017-03-17 16:11:47 UTC]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUserProfile Load (0.2ms)[0m  [1m[34mSELECT  "user_profiles".* FROM "user_profiles" WHERE "user_profiles"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "user_profiles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (55.4ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 16:12:02 UTC], ["updated_at", 2017-03-17 16:12:02 UTC]]
  [1m[35m (3.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (131.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUserProfile Load (0.1ms)[0m  [1m[34mSELECT  "user_profiles".* FROM "user_profiles" WHERE "user_profiles"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (61.5ms)[0m  [1m[32mINSERT INTO "user_profiles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (390.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 16:12:21 UTC], ["updated_at", 2017-03-17 16:12:21 UTC]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (8.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUserProfile Load (0.2ms)[0m  [1m[34mSELECT  "user_profiles".* FROM "user_profiles" WHERE "user_profiles"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (5.8ms)[0m  [1m[32mINSERT INTO "user_profiles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (33.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-17 19:35:05 UTC], ["updated_at", 2017-03-17 19:35:05 UTC]]
  [1m[35m (5.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUserProfile Load (0.1ms)[0m  [1m[34mSELECT  "user_profiles".* FROM "user_profiles" WHERE "user_profiles"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "user_profiles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "user_profiles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer)[0m
  [1m[35m (21.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 09:23:19 UTC], ["updated_at", 2017-03-20 09:23:19 UTC]]
  [1m[35m (11.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUserProfile Load (0.1ms)[0m  [1m[34mSELECT  "user_profiles".* FROM "user_profiles" WHERE "user_profiles"."user_id" = ? LIMIT ?[0m  [["user_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "user_profiles" ("user_id") VALUES (?)[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (14.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to User (20170317141651)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "user_profiles"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20170317141651"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to User (20170317141651)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170317141651"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (8.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 09:51:19 UTC], ["updated_at", 2017-03-20 09:51:19 UTC]]
  [1m[35m (5.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 09:51:35 UTC], ["updated_at", 2017-03-20 09:51:35 UTC]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e546234c-e851-46da-815f-378ec89d2f26) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe175827270 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (8.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 09:52:05 UTC], ["updated_at", 2017-03-20 09:52:05 UTC]]
  [1m[35m (46.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bdef9568-3837-4a04-8fb5-ee10c20bd8d7) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5e1fa9690 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (25.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 09:53:00 UTC], ["updated_at", 2017-03-20 09:53:00 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 31128e6a-d84e-4fde-bec5-16244320412d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f86d5484050 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (6.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 10:00:34 UTC], ["updated_at", 2017-03-20 10:00:34 UTC]]
  [1m[35m (46.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2270ebf9-97b2-4f6d-a3f9-787e8a8d4c9b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff2481572b8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 787bc1af-bad7-48cf-a0c8-fdfe68ea68ba) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ff2480e29e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2c57e6dc-bde1-4bfe-a93c-b9dae287e362) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ff245af6e48 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 10:00:59 UTC], ["updated_at", 2017-03-20 10:00:59 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 53b53e99-6f27-42b8-8e10-b4a95bda6f5f) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f86609d8bc0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (8.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b5364ff3-04e7-4777-975f-77516e59b150) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8660948048 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 10:02:14 UTC], ["updated_at", 2017-03-20 10:02:14 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: eca1fb97-dbf7-483c-8560-942cf1d77254) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f900ca83e20 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8da982e2-1122-4887-9323-194258115fc3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f901086ce30 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170317141651)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 10:02:24 UTC], ["updated_at", 2017-03-20 10:02:24 UTC]]
  [1m[35m (6.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 06be99aa-c6b5-4106-a905-203e2c7d9651) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f9b0c7aa0e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 918c7eb1-6b96-4ed3-9794-f10b4e3e6db4) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f9b10093910 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (4.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "john@doe.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (5.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvitations (20170320153113)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_inviter_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_inviter_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170320153113"]]
  [1m[35m (23.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (15.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_inviter_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_inviter_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:48:20 UTC], ["updated_at", 2017-03-20 15:48:20 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:48:27 UTC], ["updated_at", 2017-03-20 15:48:27 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bc70b391-e344-49f9-8b57-98609c3149f1) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd169fc49e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:49:23 UTC], ["updated_at", 2017-03-20 15:49:23 UTC]]
  [1m[35m (6.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 44d3cdc3-4121-48e9-9687-4726401e0426) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd562402920 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (7.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: be250158-7d93-4f74-b8c6-01fa89b0fa43) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd5623a3a38 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: db10a352-8475-4f04-8f90-5e92f5a60971) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd56232ecd8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: cb98fc3c-156b-4c4f-aa59-367d4ca54afc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd56231cd58 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:49:46 UTC], ["updated_at", 2017-03-20 15:49:46 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 375dd891-87f4-4613-999c-adb034dbe1e8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5a6624b00 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e8600507-1b06-439d-8713-a1799beaeb1d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5a65ce818 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (9.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 42d49967-4a3c-4050-96ca-9051208c29ec) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5a8a89838 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 49a1b46b-2261-4a46-a479-89eb5210b0dc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5a8a79438 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:50:45 UTC], ["updated_at", 2017-03-20 15:50:45 UTC]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c84f267e-a155-4a01-9582-cc35d5e147c5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f91dc2cc390 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (8.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4bafcb59-02e7-4f21-952b-26c0cd943f72) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f91df0b66e8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 027c91ff-caf3-40e9-868d-41bc59f2488c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f91dbf55040 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6bd7348a-2567-4c1d-8fb5-812943ea4149) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f91db229290 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:51:52 UTC], ["updated_at", 2017-03-20 15:51:52 UTC]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.9ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c07b002a-24e1-43f9-9924-176d8cca04fc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff3e9820160 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fff9b79e-ee15-417c-9e47-14102c2fe119) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff3e4f5aca0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c11affcb-d6ac-4be2-806c-07d6d4f91ff3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff3e4f4a8f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6f7b0049-5804-42d4-a5d3-f94f35033301) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff3e4f1b1e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (46.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:52:02 UTC], ["updated_at", 2017-03-20 15:52:02 UTC]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ff555719-4518-4e77-b28d-6e76081cb2b8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff9d3df0758 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4931f6eb-bebe-4b35-ac85-ea494b75461a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ff9d6081d08 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: da973195-cc29-4aeb-8e71-f355b17578a2) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff9d60585c0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8be81c74-b630-4848-9fe6-099e8a202215) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff9d29d97b0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ff866d8c-9662-4a1d-8a59-b7254c657f39) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ff9d3d1ad60 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 9d1e79a6-0b3b-4e65-a671-2a603d66e66d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff9d3ce02c8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-20 15:53:10 UTC], ["updated_at", 2017-03-20 15:53:10 UTC]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b317a672-53f9-4066-8061-f36e745ebdda) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f95c0a46c00 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8807ceb0-47e3-46ab-98d2-eb481979daf5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f95c08b6a98 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 65315b45-1bd7-4310-9f92-9d270632c46c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f95c08cdf90 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e8ce2a31-78b9-475d-8a6b-3caf685d9616) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f95c089a7f8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@foo.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bd1b6224-b315-4a32-b1f9-35961995edd0) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f95bda79860 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: aaec42da-6c54-4e2c-97e2-92e79697e5e7) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f95c08a03d8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (27.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (22.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fe18f909-bf78-44cd-a1f1-ac0a287956be) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa500fa26f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0090a7cb-68e2-43a3-a34f-fdb4b318c6a9) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa501f674c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (13.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (19.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a0ebd2c5-1940-43d2-be6c-7dbcc933d998) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe78eae80d0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bf2c8005-3d06-4a41-bfde-a3f3ebfa3d4d) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe78ea3b290 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0f213132-b0ea-4976-a1f1-65535694cc65) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f98af051aa0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 22d6dc11-6b78-4e8d-b7d6-16211d42be9b) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f98ab25e540 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5056ms (ActiveRecord: 0.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (4.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (11.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f7d15380-757e-4d22-923f-6d94523ebb70) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ffc1f1fb620 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: dfcd6663-32f9-4e33-a4b1-f6196bd4d3b2) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ffc1f163af0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 84fb6726-fe4c-4ae4-8cd4-ef47328bba3c) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ffc1f14b2c0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 68838e5e-7375-48d1-a4c4-02c8701e69a8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f93502926c0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8e8e981b-ccb7-47e6-ad41-25130f1af66a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f935011af18 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 066039dc-7b6e-4d06-8e41-bcd8c995d089) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f93500b0460 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 71ms (ActiveRecord: 0.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ed078dfc-87f6-4f62-9ada-e06156c41ba7) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe7b709ac80 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0532bee7-7394-4331-ad1c-92d6b1d19944) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe7b37cc2a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bd0aa668-60f7-45a8-8639-29ef1bf9dadf) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe7b2fbd640 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 72ms (ActiveRecord: 0.7ms)
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 47c745f1-bddc-4471-b0ce-2365a0142923) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fbe896a38e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f63bff19-d1f7-4995-8a58-d3467e51f841) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fbe8b24c970 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bec40672-a53f-4325-ad07-86fe1c50d39c) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fbe895e3450 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1f00b639-9c02-4482-ab80-612e46769542) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fbe892aa3b0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 30ms (Views: 13.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e65f3477-c87f-4008-9549-20343085197d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faf9c5e0918 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7c4cc21b-8503-4ccd-9c75-635a31f85f27) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007faf9f341560 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 57279397-a3c1-485b-975e-5b3ebb4b8d50) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007faf9d9e30a0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 13b20d81-d601-4c92-ab1e-8a3c2396eb0a) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007faf9f27aaa0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 42ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (9.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b1b53b86-7b84-4cd8-96ef-5fc51cbe646c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcb8e932220 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c2895ea8-1615-4896-b638-22ae0ac734d8) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fcb8e115588 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 308959a7-1cac-4352-b80b-742c8a28b4ac) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fcb8b11b940 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 735fea22-dad2-4166-b2dd-6e41a998c219) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fcb8e027270 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3d460144-d83c-4e2e-8eb0-f192255ec53e) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb38f349a78 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (10.7ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e8990bc8-cdba-4c0e-9b07-f75e8d143a94) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb38be58ad0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (9.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 92c9c082-a923-4849-a631-7f756728a9a3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fde4691b0c8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 467dfb85-b304-4ef5-af37-333b29055bfc) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fde47069de8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5ec47d39-677f-4185-9147-221c2adfd02b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fde42fdb8a8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b6faf21a-0a5c-4b9a-adb4-18a61f4b8305) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fde43778e30 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.4ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 86a12621-e7ad-4667-98b3-f35f430b8af0) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fde43729fd8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4d5b3ea4-beef-408e-8a5a-73d37e5c93d6) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fde436f9d60 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (10.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320153113)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651);

[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-21 14:28:00 UTC], ["updated_at", 2017-03-21 14:28:00 UTC]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 98775ced-1f01-4020-9879-6ed1329cd205) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5bd9c1af8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (7.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 062bc8b9-0a01-4b53-96f6-2def0efc7731) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5c0c5dcf0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 11ed6600-ee76-472f-9dca-a142a63a2469) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe5c0ba1668 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: eef5952a-c5da-4eef-89da-a997161381e8) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe5bd176b78 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ea51125c-3826-4c84-b9c2-fa7de24c3e53) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fe5c0aef698 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c3a0e5f5-0d29-43d6-b8de-a5c06139234f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5bc959968 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a546827b-a116-4348-a2e5-a410a4f803c5) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe5bc946188 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 18aff6d7-b85a-4959-a046-264e5dc030e0) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5c0a66988 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8f73e40c-d90d-49ea-8614-6f23d0e3df88) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe5c0a3f270 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 721476c5-0bbc-4ea4-b8ca-0d3a34a7f89a) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe5c10595c0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 77e4d56c-e37a-404d-88a4-40d2cc2f8c20) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fe5c103afa8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 294ca40a-5c98-480e-a213-e32a4154f092) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5c1009520 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0a2492c5-1fc2-4705-a140-1458adbcce33) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5c10015f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c6f75a50-27d8-4dd5-8b83-271219e40815) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe5c09b25a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ffdae28f-eda8-4d6b-b769-20135e2894f8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe5bdfb2ef8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 9f89ebf2-d15b-497b-bffb-214acaac2b3b) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe5c09927c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 361577e8-20c2-4464-b582-d111356f330d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd476aa8a00 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 664ae214-1fdd-4ad6-8b98-66e9d8df022c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd4746d3e18 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0d1b4013-81c0-4c25-ab34-b45917e6bcf2) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd4769b9428 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 55152802-f546-4d86-b95f-861a8f6ce2f7) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fd47466a5f8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fddf8a2d-3476-4b09-8e9d-d02872f25f36) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd4769152b0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a738d2d1-cfdd-451f-b526-3966cacf14e8) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd474650900 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6f0302bc-f50a-4c7b-8b5c-35e52f7fe01d) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd4768b6bc0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a1f79ba9-358c-4046-b9cd-0e48434aa122) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fd4768838b0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 21a3708d-715c-47cc-ace3-cca1310469ab) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd476838ae0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 04242b25-5455-4d49-a3a6-c8b3f635c142) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd4749492b0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f7804110-8af0-4a0e-8926-8f1de3376bff) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ffd98257310 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6929ff8b-be6c-4e43-a1b8-6878a4f0822b) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ffd98204bb0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4abb3749-5052-4e51-9929-4a69cc0a7445) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ffd981bc2c0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2f4ef5a1-e3b2-4b50-a493-a2737b7458fa) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ffd9888fb38 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 39101bac-8544-4a88-8249-8d00e1864b28) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ffd98124fd8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4de852cd-85a1-4615-a62e-918e5b06b9ca) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ffd980c1d70 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 39dc0d5b-8cd2-4f2a-8b71-e6fc55c9067e) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ffd9883afc0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 832de014-96e7-40e5-a35c-308dc3435f3b) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ffd988112d8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCreditTransactions (20170320162131)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "credit_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "cents" integer DEFAULT 0 NOT NULL, "source_type" varchar NOT NULL, "source_id" integer NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_user_id" ON "credit_transactions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_credit_transactions_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_credit_transactions_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_source_type_and_source_id" ON "credit_transactions" ("source_type", "source_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20170320162131"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_credit_transactions_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_credit_transactions_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_inviter_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_inviter_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f68a2052-e011-435a-9b5d-050f3e9e88fb) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ffd35a36f30 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 71ee8291-3a64-4a6e-bc4b-97a080181051) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ffd31fa1668 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8b25edcb-57dc-44e4-9bd7-d56127c68246) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ffd31f682a0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fa39c020-5935-4e9b-86c4-b6383a493a35) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007ffd358b3528 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 34ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: eb35d6eb-e13c-4fd3-807f-f871b18c2223) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ffd31e679f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 61b7c7b1-091a-4936-9370-815a87c7a8c9) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ffd31e55ca0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.5ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7bd2e789-1c79-437c-af17-e4b2271697d6) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007ffd35829198 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: cacc8ded-ada6-4ebf-a61f-db688a9e9a71) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ffd31d6e738 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3cbca3d8-a6d4-4669-8b96-d97c3eb92edf) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ffd31d44f28 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 537eaea3-4205-451c-a7db-206cd941777a) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ffd317d2a90 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
Completed 422 Unprocessable Entity in 0ms (Views: 0.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 71c4f835-d25d-4bce-b9b6-931706ba280b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f858a6486a8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 611d3b4c-9aea-4c6a-82d9-c2a629eb8684) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f858a9508a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 63267947-ba17-4ed8-946d-e840a7e18147) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f858dac7b90 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b674bc10-090c-4553-88fe-e661012ae1d2) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f858b906a60 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 43ms (Views: 0.6ms | ActiveRecord: 1.8ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 56cbd48e-b54a-41ae-8ab8-a2ac64d4c920) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f858d9c6de0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e5171b01-692d-4e62-9ea4-a0b6c083b6d5) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f858a570050 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 91ef205b-d4bd-45cb-b9df-c094d1323cd1) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f858d954fd8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 98e37150-2e97-4251-af3d-da39998f3fe3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f858a4a2c18 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 886f87dd-31d5-466f-a2e6-0abd1e55ee55) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f858a491bc0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: da7c407b-d303-47b0-b6ff-410550945a31) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f858a469e40 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8b082543-3f1a-4a19-9da8-9d219802d2b1) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f9cf8227328 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4634952b-dda8-40f8-ae90-12451ae49c6d) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f9cf4f5daa0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f745a335-65f3-46e7-8bcc-9b82888b3b85) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f9cf80b8a00 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 37ms (Views: 0.2ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c9adc2c8-e828-4618-881d-e14ddfc695bd) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f9cf4e13730 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2d4120d8-f130-4eb4-8428-fd25789f69ca) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f9cf4dfb478 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0c1975c2-1396-465b-be6c-ac9e0aaef675) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f9cf58b9608 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.4ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a8221a5d-93e6-41d7-a848-4e9c9867a8b7) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f9cf47c3f38 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7deb70c8-d8c9-4cdb-84f1-9bdd23beb350) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f9cf4dc2128 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c2503fca-db41-45dd-a995-5f7a324aa469) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f9cf4d9b708 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 822244aa-c28e-48b5-8d3f-c15c7d58f13e) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f9cf477beb8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 57bb23a2-e052-4d6e-adab-630f7b25f2c8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f88a79235d8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b4f542ba-e50c-4860-bb49-37dc03781797) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f88a37ee5e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3c925660-80e7-44bf-87c3-0ed3a32ce55c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f88a3b393d0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 16256132-b402-4dd1-9955-645156978244) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f88a51abb90 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3ecd2853-e078-45c4-80f5-2d359104468c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f88a3770640 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 37e62b46-dd9b-4d65-ada9-b69feee4cafc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f88a51699c0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 92aebe42-0fec-472a-a0c8-dd84ac67569e) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f88a3ed2988 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7ea7ab24-6430-4f63-a610-ee988e062acc) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f88a3711118 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7f9005da-537a-492f-a215-f0e748ce5e68) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f88a3e59e98 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 1.8ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5f8eaddc-635e-48b8-b6d5-57bd4d6919a1) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f88a5118c28 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5fa07768-b03a-4026-8505-647e0690474c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f88a363d160 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1f678b30-d462-4898-a07c-9248aa166a13) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f88a36040e0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d7b2f285-d517-448d-a68f-7876cd540bfc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f88a35bd5c8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a04f8621-05f3-47f0-b451-3f5367502e15) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f88a3584ea8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4c8d6fce-7c18-43a7-8842-c62c58558b83) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f88a3d399f0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 749d5e1b-7c17-413c-a42a-8a008408a849) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f88a34b5090 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4d9ee51f-626d-4d6a-8dc2-0b81a75f9e1e) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fad4f9bf790 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1a6237b9-c3f5-4c8a-b26d-b0d136af5a29) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fad4ea98398 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1d2dc84f-d114-4453-8514-49e0a1a7c989) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fad4f8e0e50 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 01cf590d-76d4-4e86-88c0-7c4a08ceb81f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fad4ea4e630 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ec123bfb-9767-4bcc-8360-e77e523b56a0) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fad4ea2c828 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c0051bb8-ae2d-4f58-82b1-b7cf1d032a67) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fad4f888110 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f2c09924-2973-4891-bf83-35f774f873b0) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fad4f85bc78 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: df280284-f935-4801-bb2d-53b301953f67) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fad4f801840 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 27bedcc1-b67b-432c-8885-f3f08cccc477) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fad4af008a8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 82acff53-c2c2-4e3d-a46c-b3a8cb3335e3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fad4ad88f98 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 23e61fb0-c281-4bc8-bc72-11e95ba268a7) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fad4ad63360 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e2439417-b71d-467d-b7c2-29dbaf5a2191) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fad4b131758 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 693c839f-b8c9-4ee1-91a2-9e0f4db0554e) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fad4b0b9c58 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bdb017b4-fad4-453d-87cb-ba49ddf0251f) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fad4e9d34a8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d0dfe731-6474-49da-b0d1-283d4a6120f5) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007fad4e971c08 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0ad07065-9f26-43b3-869e-2462439b0ab5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fad4e8f3920 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ed41f4c3-bfad-49eb-86a5-53f9f76160f0) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff8bd09aa20 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: dc711720-59d1-4c5f-8c0f-a4d776c4ae93) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ff8b961e9a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 606ae38d-3f19-438d-acd6-16d6e0eef643) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007ff8b95a9830 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ce5c006b-c9c1-4f79-8be4-f91d2fa32b7b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff8b9e3e590 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5d83b32a-c627-4749-9cc5-9d3bac4caa6a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ff8b9e15fc8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 34d977b7-b112-48c8-b713-d74df2085387) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ff8b9560e00 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ddd00916-c288-49bc-b7b0-2076c5b67a5f) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007ff8b8b53a20 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.9ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 86a1a0ff-b9d8-4f5f-8d05-81f9248cbeaa) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff8b9bcab38 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3b54056d-18dc-44dc-8650-1bf53f50b6a7) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ff8b9bab4e0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.4ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8f4e84df-ac87-432b-990c-c1009f3e1a26) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007ff8b9b60148 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a4f902ef-bd8b-4f08-a56a-acdcc4743b33) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff8b9a51e28 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 27d032f8-94ba-4586-bcb9-357bbd233cd3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff8b89faca0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fda06569-ca44-4c11-9937-d1c1c06f5248) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff8b9970220 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3e877689-a039-4047-8b87-116e1cd4b40d) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ff8b9224390 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d75793cf-dabb-4bdd-a210-8a51a2befdd9) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007ff8b9097a40 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a9fbb639-953a-4b1f-b908-c4dd87d689d0) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007ff8b9056e00 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 056be464-6ea9-4818-af9a-22f81cecc97a) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f852c758218 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: cd7d9567-abb2-4fd4-a2cf-d175ec12551c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f852d750d00 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a73c9986-9daa-498e-bc93-4be92ed07033) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f852d721b40 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ac076c70-cd12-4934-835c-4bc612708e0d) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f852d63e390 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: eff58e1c-f55e-4067-931e-001ba073a69e) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f852d614a18 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d377db90-928c-439a-932e-6feefaabfe26) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f852d5ec018 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a41d1adc-30bf-49de-b4cc-928fb4c9f0ba) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f852c5ba5f0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 92c36485-e10c-4310-bc7b-5cb6246f32b1) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f852c9eaa08 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4d8ed6cb-d374-4497-b771-63dc877c1c44) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f852d54c798 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7080a92e-0d3e-4a6a-a91f-c0b2622c4ec7) to Async(mailers) with arguments: "AppMailer", "notify_affiliate_payment", "deliver_now", #<GlobalID:0x007f852c99b2c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e035c29c-bbb7-46cb-b3c0-f21eed285001) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f852c4aa020 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: de091f7e-447c-4082-9f55-cab119d093b6) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f852c410560 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7734a664-6b3c-4d96-abab-7120ac8f58bb) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f852d4cd7b8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1b6f7aaa-054c-4fcf-bfa6-4bf27046fc70) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f852c3bac00 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f3e1333f-31de-46e7-b743-4e6689777ac4) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f852c372978 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 374cc939-2400-40cc-ad6e-b97c1e0f9865) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f852d3e6a20 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (3.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 289b99ba-cf4c-4cb9-9e40-365630e903e8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa29cf8b470 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5f1692aa-4695-4c2f-ad8a-f1ab20be0dfc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa29cee1d30 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6bfe8063-b00c-47ed-9cdc-1721cb0c3e24) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa29c7e09a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fa30a7a8-3274-4268-ab90-5a1b03927ff3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa29ce92e60 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 35efd8c4-3629-4cc1-8507-e33c14ec816d) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa29ce730b0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f3970c49-0397-4ac6-b171-c7a01d8fe2c8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa29ce05a10 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 03e51e87-c83d-4ba8-9b16-b8a0ab7f1895) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa29c6f5928 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1dca768e-c7cb-43a2-9b98-d1dd4246afc9) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa29e149608 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f3709cb6-2e46-4d8c-95de-70fd22392d91) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fa29d16b2b8 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 54ms (Views: 0.3ms | ActiveRecord: 2.1ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4d400362-4888-40d7-bb3b-00b40d9b4afe) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa29cd34a50 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7476d036-68d0-4164-b34e-1c410e8c9117) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa29ccfcd08 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6a57ad12-ca6a-4be9-a694-161ac9a6dc5e) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fa29ccb7578 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6650166d-ea56-450d-94d1-5eca32738cba) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fa29cc4cde0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 11d4c1b4-b635-40ff-9537-b7f54d302e4a) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa29d12b988 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 72baa959-4841-40ba-81b4-fe0e95a6a076) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa29cbcdb30 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: aeb6c0f4-0c42-4086-b182-bdffa18c2cbc) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fa29cb8fc40 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6c20a004-1f46-4d4e-8cc4-839bb8eb8771) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fa29cb6f2b0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d823edd3-3a8f-4af7-894f-56bd6686c0dc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe65a754390 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2a6ebca9-58a3-4820-ac57-63c8a0b1ef6d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe65a6c77b0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e15e68fb-f011-4601-9eac-3947f2bd9646) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe659c6f6c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 108912d5-6ccd-45f4-bd3b-d21f9f8a4e49) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe65a674bf0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: da987f6b-5b0c-4fbe-a33e-004c8a5280ad) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe659c64db8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d5753fa3-9540-4d9c-ad1f-b86b778dd296) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe65a60cb40 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b2fc61b3-9355-478b-8695-bb3e72d4ace6) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe65a5ed5d8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d9294688-04a3-4255-b6b5-0a6b4efb6a74) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fe65a546738 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.2ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3509ddfa-1923-4c0d-9d30-cb019f53f7c9) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe659b67c58 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e2028590-19fd-4005-94c1-83e704f012d1) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe65a3b81a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0acef22c-6e9f-4b51-ad31-048c086dd7b0) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe658a40538 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7bd293f2-7d53-4f5f-bbd9-da1ef000bb73) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe65a459eb0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 57b3f6c3-bbf9-4c65-b603-420ea2709f36) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe65a4219c0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1c590c08-65c0-48f7-a249-75a3c492c085) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe65a390150 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3cc4c217-38f5-476e-8d7a-7160303942fd) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fe6592b21f8 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.3ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 9383ec72-1054-4963-a19e-401685cd491f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe65a2f1230 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3cc05ca1-c681-49bb-848b-3c7b11382295) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc373ee28c8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3ae1ff9a-4433-40f3-8eb8-10fa602f1210) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fc373e209a8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a7a14dda-92d2-4d33-a6da-81d26e5a9c90) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fc3727f0228 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 37618fc6-7999-4185-a3bb-cd5681dfc2c3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc37276b898 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: af8fb616-85c1-4255-82f5-27cbaf9ad655) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fc373d5b978 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 027ccc4f-36cd-42ce-94e3-f4245366cec3) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fc37274aaa8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3d2cbce7-ba0e-4a76-98ea-084db16c2210) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fc372711820 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3025f2b1-5533-4572-a95b-4b190c3e65b8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc3726c0a38 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3129f8f0-418c-4941-929f-4559c8e2b4a0) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fc372697020 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2b62e42d-b24f-4df1-8f63-61d0ecf342da) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fc372928cd0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 96de2f8f-9f30-477e-a7f3-fd927bbed3ff) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc37260c880 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3eee7472-a054-4d26-9301-215b4c4fb9ad) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fc373c509c0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 00b2056e-18a7-4f49-a703-35a82a1645e1) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc3725c63a8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6a720772-9d57-4e5c-b839-4eabfe1e9d1e) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fc3725965e0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 47af8680-def7-45c9-9237-3021dd4cb714) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc373bb06c8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: eb3908da-15e4-4aad-a793-e2530173ecde) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc373b4a760 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4844d502-c09e-463d-b0fa-9c33dab68ef8) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fc372496960 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 90bf3f65-a51e-4b98-bcd8-68ccc30c1e03) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc372455f78 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: cc7928b0-7e55-40d7-b012-ae3fa5f609d1) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fc3723f6668 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 51872242-68d2-4cd8-8e6c-814d9bc9cd0b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fc373abe170 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 397beed6-7271-48ad-b3e7-d297ad80e9b6) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853cf8c028 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 46227494-0ee0-47d5-ac7e-aa5d6977ac91) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853ceb7eb8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 426598ec-78f0-418a-b57a-c8a04f68de36) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f853ce8f648 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (3.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e7efdbe2-c44f-4558-8d34-5946d98fe45f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853ce5ecf0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c2b276b9-e61e-481c-bda0-09400cd4dd00) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f853e213b10 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0597ff09-4f47-4e51-b441-125a83102a34) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853d4b2980 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d03fb633-1247-481e-8b95-77678b3a40ca) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853ce0ecc8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1291e688-6066-4514-8746-681a9b591781) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f853cded690 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ab0b7eee-e0ca-43a8-9519-fe45a88e5d1d) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007f853e11ca40 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a8a30928-7c29-4157-be63-d6e1299203cc) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853e105f48 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c94b371f-0718-4d2e-922c-3df10e79d615) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f853cc7a8d0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 61a48e1d-f7d7-472e-987e-5c11cd687c30) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f853cc439e8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 28b598a5-d84a-425e-8641-15479a832ec8) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007f853e0f6110 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 96f7c238-5d3e-4def-a208-3675018daf61) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853e0c65f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fbaec554-ab24-4cbb-87b0-dff8ab8cfde6) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f853c24e370 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 66390bcf-f4d3-4a97-98a6-6558270b4698) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f853d2986b8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 104cfd6d-c53e-4c03-abdd-560153c457d2) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853cb31d48 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 753d570d-da62-4b42-aa90-191f108a78ac) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f853d212c20 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a21e9552-5edf-41fc-9f4e-dedcc7e0dbd7) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f853ca2b908 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6623d062-2160-4fe2-ac55-0cd7c3470552) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f853c91c0d0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1899f3a8-e21e-4c42-93cf-fd94ef83166f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7527e9a80 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e6d4af21-0e64-46e4-8a10-9d0bea36e2e4) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb752738758 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 87cf1ac4-4081-4a3b-a2fa-a2148047b253) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7526f16c8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 40625ad0-1f6d-4de1-9455-48ae47612011) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7531e8b58 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b6a996e6-5bd2-4cc0-a62a-6e5485a3bfd2) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7531c0ab8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1513d423-5725-4436-a965-db81450c536e) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb751602ee8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 536c7782-1468-4a64-b944-34d0a8d5b939) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb75268aec8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 620c383d-1bf4-4a85-94ab-9f352781d2f8) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fb75259b918 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 1.9ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6682ee23-1d52-48aa-9b0c-fa78088631ec) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb751a58920 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4d85dfb4-d803-4957-8c70-d0e248750152) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb75253dbb0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ffce0fc2-b06a-4c30-bad1-809acdb3b194) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fb7519f4fd8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0bb3131c-5b03-4bdb-af20-91e0cab7891e) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fb7524cf840 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4e614e52-9a64-4910-8400-4014c6354264) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb75248e610 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 93cb952b-5beb-40f0-b8da-fdca2ce6208a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb75246e0e0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 12ded623-a112-4dfb-94c3-86abbf5eedfb) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fb752407548 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5e1681bf-9098-4eb7-b226-059c7263baca) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7531205b8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a5f80fff-56fb-4b4a-a8c5-67211b638ea3) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb751964ac8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: eb71bd50-feba-4c58-a2cd-f5d701afddf2) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb75136b3d8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 21dfce5f-b044-4eac-a478-c0a9c4c8ee93) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7530d2db8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: beeaf96e-bb33-46de-8ea0-e1454b468e00) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7522976e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 689004ae-30bc-4563-944a-35dd23b3be26) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe2847d3d90 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 06051ef9-fd8c-4b5d-aaa8-f4674987a0ee) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe284744a00 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c00bd2e4-a9af-454f-a422-463f7d991cff) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe28591ddd0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 015c78a2-4ad2-4ebf-a057-54adc0d5b736) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe2859143c0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a8b35ad3-17b6-4f9c-b0a2-8f88836cdfbb) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fe2845e64d8 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6f524630-cebc-4afb-bd4c-e21b9e4a2251) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe2845b5590 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4f601dff-09e8-4a8e-ab48-6891fee2d65d) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe283de3380 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 82b754eb-9911-4cae-b462-b3f6d0600af3) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fe284560720 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b461260b-ef53-4abe-8689-2e52c70aa4aa) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe283d6b330 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7514a12c-1220-43e1-87e5-db2567460897) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe2844b1ba8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5188b7ed-392c-473f-8233-d904e08241f9) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe284491010 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e35d2ca5-8e45-4e98-8a2c-47200772bd71) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe283caad88 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f07529c4-b973-406a-b1ef-3f854ade00d8) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe2848f3ab8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f5af0972-936f-4f2e-8f28-35718824ef77) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe28586eec0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 88adaf59-20ba-4147-ab55-0eea9da3214b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe28419ff50 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2a856ec8-ba02-446a-90eb-bb1b4336c768) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe284164bf8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: cfbacdda-cf64-4e76-b483-b6dff534914b) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fe284837368 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 36cf03d9-e5d9-4ff7-8497-ff392b20b4e2) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe288167ed0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 87230abf-31d1-4373-a98c-7ab82ca2fbfc) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe2889aa5c0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 77fdde38-0636-4a99-93eb-617222df5f75) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe284ae2158 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 30c74564-f998-4566-8818-8f9f0fd7197a) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fe288991750 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: dc76eaed-4cae-4830-80ce-65522cc7c13c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fe288962270 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5860ce96-a16f-4fc1-9cbd-418f4961e9b8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd880222350 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c9274c48-9fef-4dbd-bf98-843a7e93aef4) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd88012b938 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a9a56f7b-8646-4119-90a9-865db637a4c7) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd87e24ab68 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 29ms (Views: 0.6ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1af395fc-84e9-4f25-aa9e-9aefda7045b3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd880052430 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 03110290-41a9-42f9-a927-e405c12277f6) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd88002a2a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8e600f00-005b-4c55-9155-dde28a7bd0f7) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd8800112f0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ce1509de-a64b-48c5-8c5d-8ee88c5e68f2) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fd87e1cb188 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.2ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 13ms (Views: 0.4ms | ActiveRecord: 1.0ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ed1cd699-7618-4be6-8a60-8919b2757d95) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd87db76f08 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a689e665-be20-4925-a4da-5113462542f1) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd87e1a9128 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.5ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1b978d9b-37de-44f1-9e96-30b284849cf3) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fd87e19b5f0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4dbf21ad-8545-4779-b1ea-39b91c3abb8d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd87e181998 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a0f2f737-6577-4a1b-9f13-d7ac4e4b37bd) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd87c1188c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.6ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c719b168-a39c-418f-878f-ab0d4131db97) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd87cd41d98 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 05609caf-010d-43c9-9bb2-1b332841ea31) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd87d9d4e20 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b9d27bd3-0a80-4599-a65a-60f6cd4f353a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd87ccd04b8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b746f3d3-48c1-417e-a038-430e87c43b4d) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd87d96fed0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fe5e974f-1d34-433f-befb-7afee58c0981) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd87de038c0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b5885eeb-b669-402f-949e-ad9046233883) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd87e3ae428 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6f752534-a225-4dca-995f-5a789399cda6) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd8803ab690 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 504b2b6b-b3d9-433e-9d0d-e56961828c3d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd87ddf8038 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a8d5d7ea-55b6-4899-b83c-fd3debfc9f3b) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd8803a0538 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 66c4aed7-33cd-453a-b1b9-781aef96bf19) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd880313f98 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1950270c-fbb4-4121-82ea-ffe9657c6324) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa899f846e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1293256d-9909-4ab0-a059-c64bed3b9b9d) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa89ad51390 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 10889d2c-8a85-4888-bae9-52a21f7d2097) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa899ed2b20 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e2d4f7d8-f1bd-4088-9e2f-4653125ea4f5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa899e4a590 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7b2b40ba-a760-468f-8f06-2368d22b51f1) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa89a388660 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.7ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 24bd1cc1-8d19-4333-aafa-535abf588483) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa899dcd6f8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2954ad29-b7e5-46f5-9b0e-11fc65700c56) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa89ad11448 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 055370ae-f07d-416f-bac4-1ce2f2940420) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fa89ac7a598 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ec1693f8-ae73-4199-b1e9-2e869ef9f7b6) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa899c7df00 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8a14a0b4-c46f-40b7-9c40-117e8c01dcf6) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa899c6e168 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2bce020e-52c5-4df1-bb72-ef8256a3685f) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fa89abe5498 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2ce897d4-0423-4175-a1da-3865eebb6f98) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fa89abaf6e0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f57cedfd-1ced-46ac-a6a4-22fb05282709) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa89ab76610 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ca535b5f-5f68-448c-9ed2-93881a60dd6c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fa899bcc278 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 82765ced-570b-4687-a8a7-6048f0c45ed8) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fa89aaff060 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ce2dc7e0-621d-4390-9e3c-28978b60a88b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fa89aa5fec0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d1ebacd7-1e4b-4b9a-9e9a-7d27d018df03) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd892744880 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (9.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3b9ae16f-fc29-474d-a011-1f5a111dce84) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd890f76f00 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b6720a15-08dc-46c6-9ff2-bdcbd87f0e9e) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd8919849c0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fcbeaf78-8079-459c-9288-81c6288aea1d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd8926a71e8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c03fee3a-706d-4600-9b2f-3c624ca79e7f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faee9ff1348 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 07cb6edb-b4da-4c2c-8621-fd56a49f35f8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faeea217d48 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3adcdeca-fba9-4610-b738-39a0ee715822) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007faee8e5da50 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 46cb6078-c95c-485a-b4e7-5cb5ca0d5b80) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faee8e2ed68 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 993d3c2f-46f1-4b44-bf36-092ce831ddf2) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007faee9f1c440 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 20cec309-a639-449f-8997-3d49ecb941d5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faee8de29e0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d6b71290-6b7d-4666-bfbd-b2c054fe2de7) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007faee8ddbb90 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f5f30cac-a7e6-490b-a423-84166e87cc7c) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007faee921e6a8 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 039f1e0f-fcaf-4761-ba9c-9127c003e64c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faeea1c5c50 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 01a206c7-b18a-4dfb-b8d5-c0a8a59954a6) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007faee920e370 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fe95bfdc-d188-4550-8c56-2c4ec37e14f2) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007faeea196b08 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c5fde9cb-0d71-4d4b-b4a1-9ad01db6fd70) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faee9d6a930 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c0a7164b-e936-40e4-a31e-4e8e6f95dfca) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007faee91dd748 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6be344a9-2f41-4a30-9f45-0837dfefada2) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007faee9185278 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 45a06331-c137-4068-83bd-f8c400f1ca11) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007faee9cf3ee8 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 21aac485-ea50-4732-9aa0-ee5d49a7b28c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007faee8b5b230 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 81c09d4c-974b-41ff-9af8-26fa8a9d7ae5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed250bb098 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a01d44c9-0a0b-4b75-95f0-d28690e68b58) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed21229898 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 42c0e750-561b-478d-a5ed-81df944a189f) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fed212238f8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (4.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ec45ee7b-2299-44f0-b0ec-910dc09922ea) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed20f6f0d0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 606d5247-8fc9-4839-9a87-046f2129edbe) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fed210b40d0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 548c8034-8efc-4eac-a9de-a3b2c9f6a15c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed20f2dea0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8e06440e-a871-4954-a800-e8c73de9c559) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed20f27870 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: af0f4452-9a2c-4366-9e60-92e67674b67a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fed22c724e8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 231e9b69-8fa3-43e8-81b3-c7cf0b2ca9f4) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fed20ecddc0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: deb7368c-c781-4c44-8623-df19de0db628) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed20dd7c40 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bfe3d8af-3b3a-4fa5-9ae5-73addf309bab) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fed2114f238 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 38482190-2662-400f-a743-b3326c9d5731) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fed20d87880 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 88b319b9-9641-4404-94bf-7c860626cc7d) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fed20d2f720 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCreditTransaction Load (0.4ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 889b2b3c-59e4-4775-87ba-289154d2d82b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed2112e8f8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e4a009f6-ea0f-46fc-8165-563cb5ffe2b2) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fed20c9c420 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7166b982-588e-442e-a2b3-d368fe750b7b) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fed22aa20f0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCreditTransaction Load (0.2ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f6863695-876a-4e54-a58f-ab6d5c6075f1) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fed20bbc500 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0dd41dbe-43a8-4a81-aa2e-4a50c2d0dbcb) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fed20b8eba0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 729e1818-0e0b-4673-89e8-69beb2f67a63) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fed213d3130 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.6ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bedf7114-eb09-4dc4-99dd-8055db5a98c5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd903779168 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7ea7076c-101a-469b-a228-f4690eeba4b0) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd9036a31a8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c10531fe-f6b0-49f0-9a41-aa9336cc3ccf) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd903d99f20 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 885b76cd-72a8-44d5-ad84-10239421d97d) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd903671568 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1fff533e-759a-4909-8475-df5d752a83d0) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd90364a328 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a665d659-379b-4f86-a6d0-b578b532ec8f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd90362a280 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3403059c-4290-4dda-af1d-2dd51ede2799) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd9036137d8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.4ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0d61a243-82d9-4171-bd37-4d4ecc2d72d8) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fd90419ddb0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.2ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 808afc10-8ca5-4150-a73c-03dc89e430e8) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd9033ab838 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b1e2f97c-aaca-40f8-aefc-3c49badfc0da) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd904a83b28 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 58194836-affe-4e12-a570-5fd3be2fe3e3) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd9034c1d08 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3b685ca7-d2f9-4494-beb3-d2e858de2064) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd90410fd58 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4149ffc4-e3bf-4955-8c37-7fb93fbaf067) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd903422640 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ccba7250-658e-40a6-bcc3-48ce7e1d77dc) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd9049fa878 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d2ad0635-2e77-4e3d-a44c-2e2f44207ab9) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fd904988908 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 551ac39c-2ea9-4eb3-af2b-f607325b2100) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd903b95968 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5cbce538-8e97-463d-9caf-d264cb6b5416) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fd903b65650 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4b20e8ab-534e-4e97-acf3-213eae2befec) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fd90331ae00 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (5.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8ab507f9-ef8a-4672-b1f1-ce0379cdc4d5) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fd9036c9240 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b280157a-7c36-429a-933f-d2da8759eb75) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacbed8490 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 38ab5004-b265-4238-b1fb-20d79ea1e403) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fcacbe01af8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e422e95f-a0f8-4039-b632-b9e1d9176330) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacbdecbd0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e0336eb3-9553-47b0-80cd-85a23d979b9b) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fcacd656798 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (6.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d1477464-4c09-41e9-97cb-4e0b131e7058) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacbd9ed18 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0c527a15-c4a1-44de-b64f-47cb47181218) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacd627100 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3db6863b-dd97-410c-9b51-b37a322dbcac) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fcacd6148e8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.5ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 46e936da-7862-4a1b-9ed6-6c6375d72ee8) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fcacd5ffa38 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 2.0ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5a0dafce-caa7-4ae0-b1f1-94e5114f4ea6) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacd566360 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: cdc4c008-3310-479d-ba15-7977311d7589) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fcacd4963e0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7c6ce353-a3be-4778-9411-91e512b3455a) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fcacd54ff20 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8c65f866-1013-462a-b992-db2ea58bd779) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fcacd526418 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 70eec9d7-c8f6-44bc-b0a4-353be90366c3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacbc08f08 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 9717ac77-330f-45be-9de0-3e5ffd2fabf7) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fcacd4bc4f0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 3df74dde-4883-4ab7-969b-d38db42540d9) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fcacd3f7ec0 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 9d42bb7d-1455-49c9-b48f-fa1921f7c0b9) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacd385de8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8ac4a50b-c190-4d92-88a2-a189ed5e8980) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fcacd334998 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4ff789d3-0212-4d17-8ee5-3abfb7c61c68) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fcacb983080 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 917ec96d-e601-47c8-a09a-4d97e5410e0b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fcacc289fa8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b8767d3b-c7eb-4f29-b5e5-622ab78eeb86) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6c339cf8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f5756dc9-dd3f-44b1-a501-6e8b89f62b9c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdc6d63cf80 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c17caf82-810e-4927-a429-af8547f1d74c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6bef4ee0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (6.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6d1af8c9-50de-4d20-966a-c39daa2fc3dd) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6beb53a8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e17c90a3-151e-4157-a8da-8f300253024a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdc6c3124a0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5cfbe6f7-adcb-4898-ab51-66c33dd68cbb) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6c97b058 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c7752698-4a4d-4640-b056-4656f79956de) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6be307e8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 2ca49503-dfc6-427b-93bc-e295da16ab6f) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdc6c299e60 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ad5e8dfe-3dd8-45a8-b00f-7d3caed73b2d) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fdc6bddaeb0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 1.2ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ce975e47-69f8-4c63-aaad-46c6d3f10839) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6c230938 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: dd8f2da4-2306-41ab-8b83-f7da7149b729) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdc6bd1c0c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.4ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a1dd1316-563f-4d97-aabb-a256563c3ffa) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fdc6bcdf768 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7f9b56c2-fc98-4bc5-a245-1619d34e89f7) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6bc8fba0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a8eeaa84-6780-4412-aa23-30ed185f31db) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdc6bc3e958 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 99320ef9-2beb-4140-8804-9baee7d5154f) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fdc6c178798 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ac8c146d-583e-4e63-8eee-249970454d1f) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fdc6c162858 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
  [1m[36mCreditTransaction Load (0.2ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 95c8a9da-a81d-4059-9a1c-ddb935766679) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdc6bb94a98 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 381363ee-ed1a-4587-9d27-95d591bb6ad9) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdc6c8aaf20 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a64e717c-39ee-472a-8c1b-3e9331323bab) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fdc700e1f60 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d5b3c212-5ed7-4f4a-9c68-79c069899734) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c6868e10 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5080a2de-8ab7-4dfc-9c43-ba2e30a44ddf) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c2d75470 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7ed62df7-8dd6-42a1-8ef8-a376e46a61e0) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7c4233b00 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 83b9b53d-84f0-491b-b8c8-0a84c18abee7) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fb7c27812f8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6678d8bd-ae04-4b11-9e9b-1a5dc8aefed1) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fb7c26c3c80 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e74d7e03-4709-4476-ad22-56cbe8baf289) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c26c97e8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: db6e68fb-3e85-4260-aaae-401bdd4d813f) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7c417ac40 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.4ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 046c0a25-e3b3-47bb-8811-03d56c5055b7) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fb7c2c10d28 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fc123b10-2d51-4e56-8873-d88108df048b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c264f600 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b96a6d9b-0a54-48cd-af9b-3d87ee089ee2) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7c3175318 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 136aa43d-e71a-43cf-b440-126c76b30b27) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fb7c2b22da8 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5a9fe492-34fe-4f95-8560-3e39225e4ca9) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c258f8f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 716a8d74-efec-4e4d-906d-7f48c91fd668) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7c2567a58 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: bc505fe5-4099-407c-a098-6166a3ad50bb) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fb7c23b4e90 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.6ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 922d76be-ddde-4453-a5da-705e0331118a) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c2f37a88 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0443e6f0-ce47-471f-855f-bdb2458bf1c3) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7c2f0c7e8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 83281fad-e15a-49b9-aafb-73248a2cba68) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fb7c69e27f0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 330b49e3-99a0-488c-a253-f69946b9348f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c2ee5850 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 7d1562fa-9de1-4205-b70a-2b4b022931fb) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7c4370388 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.3ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 693d759c-dadc-4595-8715-3bb44ae997d3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c2ecc558 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 37b2bec6-b7a2-4de8-98c3-9f52f7f35248) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fb7c2eaf908 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0f06f333-d63d-48e2-a59f-b0993d2eb281) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fb7c2e97f38 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "credit_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "cents" integer DEFAULT 0 NOT NULL, "source_type" varchar NOT NULL, "source_id" integer NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_source_type_and_source_id" ON "credit_transactions" ("source_type", "source_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_user_id" ON "credit_transactions" ("user_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320162131)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651),
(20170320153113);

[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-03-22 08:53:46 UTC], ["updated_at", 2017-03-22 08:53:46 UTC]]
  [1m[35m (4.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6a92056a-334c-453e-aa48-f822ba215056) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8ec3b0d7f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (9.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-2902d8e1-5a9b-4fdd-86ca-e5a569cf6f9e@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-2902d8e1-5a9b-4fdd-86ca-e5a569cf6f9e@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 00122e96-9fde-442e-892b-7fd33187e6b4) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8ec4b81c58 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 44f36e18-921c-4c8f-aa27-bd736eedb0a6) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f8ec78bff80 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-3ab38926-eff5-4a09-84c6-b4cdfac73401@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-3ab38926-eff5-4a09-84c6-b4cdfac73401@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 803ede8a-02c2-4f13-b9bc-5686b6218911) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8ec371f558 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-4516d6d9-4731-4b0a-a40c-d97aa520075d@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-4516d6d9-4731-4b0a-a40c-d97aa520075d@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 8bd3901e-8f9e-448e-b3b2-06bff47c5e9f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8ec3ac8da8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b584104c-3bf2-46e1-91b5-4f0b1f37eacc) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f8ec786b868 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.5ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-ee33a37b-0eba-4e88-b358-19101ebfef9a@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-ee33a37b-0eba-4e88-b358-19101ebfef9a@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 57e157f4-00fc-4000-a2ff-00fa0648b646) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8ec4b53b28 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1b32f8c7-0f3b-4637-9c41-e013c746fe7f) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f8ec7821b00 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 618e00fa-feb8-44d4-9678-eb6908629a5d) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f8ec3a8f990 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 17254ce5-d5a0-4383-8ef5-b9e63928d788) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007f8ec47a9388 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 1.3ms)
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCreditTransaction Load (0.2ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-bcfe02ca-bf82-44a2-b4a5-55c787ae37bd@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-bcfe02ca-bf82-44a2-b4a5-55c787ae37bd@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c4cb5275-6443-460d-9c8d-bc6567326ded) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8ec36382c0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 89b93ed0-d11b-4a26-b964-0bdb8f8a3575) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f8ec4af99e8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4fdb210b-2e2f-4204-85d5-87ec3f9a8f88) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007f8ec3610450 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-923abb50-b708-4f8a-9ded-d376b9081307@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-923abb50-b708-4f8a-9ded-d376b9081307@example.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d4f9591f-f8e0-4bdc-90bf-9c9b02c39fc2) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007f8ec4ac1db8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 11e28d24-3b67-45d9-9048-d57e1e5db46b) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007f8ec4ab12d8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 48632224-edb5-4c91-81f0-378263288874) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007f8ec46d8ff8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "credit_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "cents" integer DEFAULT 0 NOT NULL, "source_type" varchar NOT NULL, "source_id" integer NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_source_type_and_source_id" ON "credit_transactions" ("source_type", "source_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_user_id" ON "credit_transactions" ("user_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320162131)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651),
(20170320153113);

[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-04-27 15:27:45 UTC], ["updated_at", 2017-04-27 15:27:45 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 31aec73c-f0fd-4897-8cbe-4bf0f0bfe84f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fab85a16c50 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-876e7715-d48d-4f28-881c-181d6907bf50@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-876e7715-d48d-4f28-881c-181d6907bf50@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: eaabb565-aad5-4ce8-acd4-a915209f4964) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fab85b51890 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 95495eae-6ce6-4aa2-9cef-180161bf78c9) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fab85af5568 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: db6bd53c-8a94-4faf-ae5d-d5b09655d959) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fab85995f88 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-74b12723-c4d4-44b1-bb79-0304dadf60f5@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-74b12723-c4d4-44b1-bb79-0304dadf60f5@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5cff7b4b-2bda-45e8-8354-4e6afbce23f0) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fab85899940 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ce19c05d-4fd1-4bfb-94d0-493f701cdd79) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fab848bbf28 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1f57111b-e3c0-40bb-a5b1-0abd4c15831c) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fab848a38d8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-b94b4e77-4734-43a0-ad9e-110c5ca5346d@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-b94b4e77-4734-43a0-ad9e-110c5ca5346d@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e0872346-1a68-4ba7-b730-397913ad0191) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fab85905208 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 21d997c2-2230-4cf1-89d6-8ca9b4853169) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fab858ec0c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d4cb389a-e6ed-4c3c-a6b4-3a73d3870830) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fab858bfa78 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: afb874c8-2840-4d47-9496-01d98ae46604) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fab8587d970 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-14b6287a-196d-4e3c-bdf2-b0ca4aebe53a@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-14b6287a-196d-4e3c-bdf2-b0ca4aebe53a@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 931b6152-600e-4904-bb50-bbd9c4099620) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fab85847320 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: e01cc06d-747e-461c-aaf8-548e690187b3) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fab8582e410 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-4d445218-a1dd-4d23-b245-1c1f8c19cdca@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-4d445218-a1dd-4d23-b245-1c1f8c19cdca@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a8651ed9-e94c-45a6-a08a-643a26b88b27) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fab8580bbe0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-716defe5-90c3-49fd-b22f-3fa46a5d03b6@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-716defe5-90c3-49fd-b22f-3fa46a5d03b6@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 678df013-413d-4d49-9f67-54b557a8123f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fab817bdd18 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ffa4a1c3-5c98-445e-9a33-ad6af8faea46) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fab817af740 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.5ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "credit_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "cents" integer DEFAULT 0 NOT NULL, "source_type" varchar NOT NULL, "source_id" integer NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_source_type_and_source_id" ON "credit_transactions" ("source_type", "source_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_user_id" ON "credit_transactions" ("user_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320162131)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651),
(20170320153113);

[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-04-27 21:06:21 UTC], ["updated_at", 2017-04-27 21:06:21 UTC]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-1eb1d635-4f31-4a5d-a1dc-2fa18f308b26@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-1eb1d635-4f31-4a5d-a1dc-2fa18f308b26@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 0bf9a633-bc25-4a54-bf69-3478fea46b2f) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdbd6fa14f0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 1aabf346-a6d8-485e-9fcd-48a156885504) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdbd6ff1f18 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 07f87c74-d75f-4d95-b813-9a479bb323df) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fdbd904f3c8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 9c779795-1e5e-45bd-86ab-807c34303981) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fdbd4871b50 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 1.4ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-154d3843-d0f3-4636-bab4-9101751e7bbc@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-154d3843-d0f3-4636-bab4-9101751e7bbc@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 493ed79a-d638-4a2c-a7e6-0c763d4b4271) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdbd6f9b7f8 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5e995407-df13-4b94-a3c0-7d431b9430b4) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdbd319a3c8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 506c8a57-8f4a-490b-8fd3-1f38b565eca2) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fdbd6f4d030 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-f4e99ce4-53a7-4349-ac48-c93d13a159b5@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-f4e99ce4-53a7-4349-ac48-c93d13a159b5@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 900f3699-b6e2-460d-9fb5-0dde8940655c) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdbd302fc68 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: a6005995-41f0-40c5-805b-07e36733e42c) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdbd6f85340 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 04fbbc05-7c3f-41fc-8adf-01ccd2657997) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fdbd6f47ef0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f68c7ff4-3a43-4fba-b31e-d1d23a075f5b) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdbd3f38b60 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-703528bf-9ce1-4b57-a081-b283b8dc1e2c@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-703528bf-9ce1-4b57-a081-b283b8dc1e2c@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 25415d8a-dce9-4b4c-864f-76cda56a54f3) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdbd3ee2ad0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d05c5bdb-f1b1-47c5-8a27-347dbea36b97) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdbd3ec9d78 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-54ae82b1-24e1-4275-91f7-f555cadadd9d@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-54ae82b1-24e1-4275-91f7-f555cadadd9d@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ad7d5cbc-d46e-49c4-a83d-91335d164cae) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdbd3e98098 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 6c3dbbce-8602-4d27-a429-63be8449c4ff) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fdbd3e81168 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-85392e1d-df9b-4ecc-974d-6206517688b5@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-85392e1d-df9b-4ecc-974d-6206517688b5@example.com"], ["name", "john doe"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4b416bb8-c33e-489d-9019-1eb15b1a0d37) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fdbd3e4a848 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", :environment]]
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "credit_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer NOT NULL, "cents" integer DEFAULT 0 NOT NULL, "source_type" varchar NOT NULL, "source_id" integer NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_source_type_and_source_id" ON "credit_transactions" ("source_type", "source_id")[0m
  [1m[35m (0.8ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_credit_transactions_on_source_type_and_source_id' AND type='index'
[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX "index_credit_transactions_on_user_id" ON "credit_transactions" ("user_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "invitations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "inviter_id" integer NOT NULL, "invitee_id" integer, "invitee_email" varchar NOT NULL, "accepted" boolean DEFAULT 'f')[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_invitee_id" ON "invitations" ("invitee_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invitations_on_invitee_id' AND type='index'
[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX "index_invitations_on_inviter_id" ON "invitations" ("inviter_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "name" varchar)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20170320162131)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20170317141651),
(20170320153113);

[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", 2017-04-27 21:20:52 UTC], ["updated_at", 2017-04-27 21:20:52 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: f7409c40-bc3d-4d8b-95ba-f078b762f357) to Async(mailers) with arguments: "AppMailer", "signup_email", "deliver_now", #<GlobalID:0x007fee764599a0 @uri=#<URI::GID gid://dummy/User/1>>
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (6.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "john@doe.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "john@doe.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-89a12a18-4026-4d13-85f2-90934dfa2ba7@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-89a12a18-4026-4d13-85f2-90934dfa2ba7@example.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 5dafa1ff-fb57-421d-8400-28aa8d9d854a) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fee7642b668 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: fb0ceed4-c528-4df4-b502-11f80395c3ff) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fee763a87e0 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT SUM("credit_transactions"."cents") FROM "credit_transactions" WHERE "credit_transactions"."user_id" = 1[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-34e24c35-887a-49b3-abc9-719534a707b5@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-34e24c35-887a-49b3-abc9-719534a707b5@example.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 4fcbae67-e143-41ef-a406-98b5b881c8ec) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fee762b88f8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.0ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.2ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 78dfd6ce-1a96-47a6-975c-b8ffd8d4ca11) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fee762583b8 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-9cd6455c-06a2-463a-9948-9cb7daa0cf74@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-9cd6455c-06a2-463a-9948-9cb7daa0cf74@example.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@example.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: 19c1bb8f-3153-4059-8bc7-a379757eaa06) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fee762087f0 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Processing by InvitationsController#accept as HTML
  Parameters: {"id"=>"1"}
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "invitee@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "users" ("email") VALUES (?)[0m  [["email", "invitee@example.com"]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: b57af901-748d-40f3-92e0-2dbfc3c5b85c) to Async(mailers) with arguments: "AppMailer", "welcome_email", "deliver_now", #<GlobalID:0x007fee761cede8 @uri=#<URI::GID gid://dummy/User/2>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "invitations" SET "invitee_id" = ? WHERE "invitations"."id" = ?[0m  [["invitee_id", 2], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  [1m[33mUPDATE "invitations" SET "accepted" = ? WHERE "invitations"."id" = ?[0m  [["accepted", true], ["id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "credit_transactions" ("user_id", "cents", "source_type", "source_id") VALUES (?, ?, ?, ?)[0m  [["user_id", 1], ["cents", 500], ["source_type", "Invitation"], ["source_id", 1]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: d9906ae5-f748-424b-92e3-ad8fcde5e23c) to Async(mailers) with arguments: "AppMailer", "notify_payment", "deliver_now", #<GlobalID:0x007fee76185e18 @uri=#<URI::GID gid://dummy/CreditTransaction/1>>
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 0.7ms)
  [1m[36mInvitation Load (0.0ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mCreditTransaction Load (0.1ms)[0m  [1m[34mSELECT  "credit_transactions".* FROM "credit_transactions" WHERE "credit_transactions"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-814a20cb-5999-47fc-a4f4-51cf5b7c6a92@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-814a20cb-5999-47fc-a4f4-51cf5b7c6a92@example.com"], ["name", "john doe"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: c0c352d0-e819-4398-8e56-a777c47008bd) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fee76146bc8 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-139b711d-221f-4bce-8d5c-ad14a43e5944@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-139b711d-221f-4bce-8d5c-ad14a43e5944@example.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
[ActiveJob] Enqueued ActionMailer::DeliveryJob (Job ID: ff2b88c6-aee4-4042-9b47-f17240be7a13) to Async(mailers) with arguments: "AppMailer", "invitation_email", "deliver_now", #<GlobalID:0x007fee76114498 @uri=#<URI::GID gid://dummy/Invitation/1>>
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mInvitation Load (0.1ms)[0m  [1m[34mSELECT  "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "foo-a92797e9-9221-4684-beee-006527d64a90@example.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "name") VALUES (?, ?)[0m  [["email", "foo-a92797e9-9221-4684-beee-006527d64a90@example.com"], ["name", "john doe"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "invitations" ("inviter_id", "invitee_email") VALUES (?, ?)[0m  [["inviter_id", 1], ["invitee_email", "invitee@foo.com"]]
  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
